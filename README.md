# Astrafy Project â€” DBT & Looker Challenge

ðŸ”— Link to the Looker Studio Dashboard: [(Add link here if available)](https://lookerstudio.google.com/reporting/d98ca459-0cc6-4272-9260-c490f97c8543)

This Git repository contains two main folders: dbt and Looker. The purpose of this document is to explain the structure of the project and the logic behind each component.

## Project Structure in Google BigQuery
Google BigQuery was used to materialize the tables and views for this project. Two datasets were created:
### 1. RAW: 
This dataset serves as the landing zone for raw data. It contains the Excel files provided in the challenge, which were converted to CSV and uploaded as tables. No transformations were applied here.

![image](https://github.com/user-attachments/assets/169b45f2-4001-40bf-b77a-8cda81e58719)

### 2. Marts: 
This dataset contains the cleaned and transformed tables generated by dbt. These tables are ready for analysis or to be used in tools like Looker

![image](https://github.com/user-attachments/assets/7900e83e-4eb0-46f5-813c-e09cb95e5482)

## DBT
The dbt folder contains the implementation of 6 technical challenges. Each one is solved using dbt models and is documented accordingly.
To generate and view the documentation locally, you can run: 

```dbt docs generate```

```dbt docs serve```

### Folder Structure
Inside models, there are two subfolders:

```models/marts```

This folder contains a .sql file for each challenge. All models are materialized as views, unless otherwise specified by the challenge.

#### 1. models/marts:
For the coding challenge, 6 excercies where assigned, this folder contains a .sql file for each assignment. All of them where materialized as views, those who are not its because the assignment explicitly says to create a table.

```Sales_2023.sql```: A filtered version of the sales table for 2023, used as a base for the other models.

```exercise1.sql```: Number of orders in 2023.

```exercise2.sql```: Number of orders per month in 2023.

```exercise3.sql```: Average number of products per order, per month, in 2023.

```exercise4.sql```: Orders from 2022â€“2023 with a qty_product column indicating total product quantity.

```exercise5_6.sql```: Segmentation logic. Both exercises are addressed in this file as they build on the same logic.


#### 2. models/lookertables: 
This folder contains combined and cleaned models based on the previous exercises. They are optimized for use in Lookerâ€™s semantic layer.
Following semantic modeling best practices, most logic is handled in dbt to reduce load on the Looker engine and improve performance.

## Looker
Since I did not have access to a Looker instance, I used Visual Studio Code and an extension to mock the LookML structure. While limited, this allowed me to define the model and views.

### Folder Structure
```Looker/models```: Contains the Looker model file. It includes the explore definition and a blank connection (since no instance was available).

```Looker/views```: Contains the views for sales and orders.
1. Each field is labeled.
2.Primary keys are defined.
3.Measures are included where performance is acceptable.
